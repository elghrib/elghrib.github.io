<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>How to Migrate TestSigma to Google Cloud with Kubernetes and Docker
| Mustafa Abdallah
| 01 Jan 0001</title><meta name=keywords content><meta name=description content="How to Migrate TestSigma to Google Cloud with Kubernetes and Docker - mstva"><link rel=canonical href=https://mstva.github.io/how_to_migrate_testsigma_to_google_cloud/><link crossorigin=anonymous href=/assets/css/stylesheet.933f0e76f81de975f42d1c7da6dddb114cd2f66a03465d8335ed83d7814a4e99.css integrity="sha256-kz8Odvgd6XX0LRx9pt3bEUzS9moDRl2DNe2D14FKTpk=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://mstva.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://mstva.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://mstva.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://mstva.github.io/apple-touch-icon.png><link rel=mask-icon href=https://mstva.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://mstva.github.io/ accesskey=h title="mstva (Alt + H)">mstva</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://mstva.github.io/tech_writings/ title=tech_writings><span>tech_writings</span></a></li><li><a href=https://mstva.github.io/arabic_writings/ title=كتاباتي_بالعربية><span>كتاباتي_بالعربية</span></a></li><li><a href=https://mstva.github.io/projects/ title=projects><span>projects</span></a></li><li><a href=https://mstva.github.io/resume/Mustafa_Abdallah_Resume.pdf title=resume><span>resume</span></a></li><li><a href=https://mstva.github.io/hire/ title=hire_me><span>hire_me</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>How to Migrate TestSigma to Google Cloud with Kubernetes and Docker</h1><p class=post-date>Mustafa Abdallah</p><hr></header><div class=post-content><h3 id=introduction>Introduction</h3><p>Migrating an application to Google Cloud can be a daunting task, but with the help of Kubernetes and Docker, it can be
simplified. In this tutorial, we will guide you through the steps of migrating TestSigma to Google Cloud with Kubernetes
and Docker.</p><h3 id=what-is-testsigma>What is TestSigma?</h3><p>TestSigma is a test automation platform that supports multiple programming languages and frameworks.</p><h3 id=prerequisites>Prerequisites</h3><p>Before you start, you should have the following:</p><ul><li>A GitHub account</li><li>A Google Cloud account</li><li>Docker installed on your local machine</li><li>Basic knowledge of Docker and Kubernetes</li></ul><h3 id=steps-on-how-to-migrate>Steps on How to Migrate:</h3><p><strong>Step 1: Clone the TestSigma repository from GitHub</strong></p><p>First, you need to clone the TestSigma repository from GitHub to your local machine. You can use the git clone command
to clone the repository. For example, git clone <a href=https://github.com/username/TestSigma.git>https://github.com/username/TestSigma.git</a>.</p><p><strong>Step 2: Create a Dockerfile</strong></p><p>Next, you need to create a Dockerfile in the root directory of the TestSigma project. The Dockerfile specifies the
dependencies, environment variables, and commands required to build and run the application. Here&rsquo;s an example
Dockerfile for a Python-based TestSigma application:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-dockerfile data-lang=dockerfile><span style=display:flex><span><span style=color:#75715e># Base image</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>FROM</span><span style=color:#e6db74> python:3.8</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e># Set environment variables</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>ENV</span> PYTHONUNBUFFERED <span style=color:#ae81ff>1</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>ENV</span> DJANGO_SETTINGS_MODULE testsigma.settings<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e># Create and set the working directory</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>RUN</span> mkdir /code<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>WORKDIR</span><span style=color:#e6db74> /code</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e># Copy requirements file</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>COPY</span> requirements.txt /code/<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e># Install dependencies</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>RUN</span> pip install -r requirements.txt<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e># Copy the application code</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>COPY</span> . /code/<span style=color:#960050;background-color:#1e0010>
</span></span></span></code></pre></div><p>This Dockerfile creates a base image from Python 3.8 and installs the dependencies listed in the requirements.txt file.
It also sets the environment variables required to run the application.</p><p><strong>Step 3: Build and push the Docker image</strong></p><p>After you&rsquo;ve created the Dockerfile, you need to build a Docker image from it using the docker build command. For
example, <code>docker build -t testsigma</code> .. This command creates a Docker image named &ldquo;testsigma&rdquo; using the Dockerfile in
the current directory.</p><p>Next, you need to push the Docker image to a Docker registry, such as Docker Hub or Google Container Registry. For
example, <code>docker push username/testsigma</code>.</p><p><strong>Step 4: Create a Kubernetes cluster on Google Cloud</strong></p><p>To deploy the TestSigma application on Google Cloud, you need to create a Kubernetes cluster. You can use
the <code>gcloud command-line</code> tool to create the cluster. For
example, <code>gcloud container clusters create testsigma-cluster --num-nodes=1 --zone=us-central1-a</code>. This command creates a
Kubernetes cluster named &ldquo;testsigma-cluster&rdquo; with one node in the &ldquo;us-central1-a&rdquo; zone.</p><p><strong>Step 5: Deploy the Docker image to the Kubernetes cluster</strong></p><p>After you&rsquo;ve created the Kubernetes cluster, you need to deploy the Docker image to the cluster using a Kubernetes
deployment file. Here&rsquo;s an example deployment file:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>apps/v1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Deployment</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>testsigma-deployment</span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>replicas</span>: <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>selector</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>matchLabels</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>app</span>: <span style=color:#ae81ff>testsigma</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>template</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>labels</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>app</span>: <span style=color:#ae81ff>testsigma</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>containers</span>:
</span></span><span style=display:flex><span>    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>testsigma-container</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>image</span>: <span style=color:#ae81ff>gcr.io/project-id/testsigma:latest</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>ports</span>:
</span></span><span style=display:flex><span>      - <span style=color:#f92672>containerPort</span>: <span style=color:#ae81ff>8000</span>
</span></span></code></pre></div><p>Replace &ldquo;project-id&rdquo; with your Google Cloud project ID and &ldquo;gcr.io/project-id/testsigma:latest&rdquo; with the Docker image
you pushed to the Docker registry. This deployment file specifies a deployment named &ldquo;testsigma-deployment&rdquo; that creates
one replica of the TestSigma application. It also specifies the Docker image URL, container port, and labels.</p><p>To deploy the application, you need to apply the deployment file using the kubectl apply command. For
example, <code>kubectl apply -f testsigma-deployment.yaml</code>. This command creates a deployment and a pod running the TestSigma
application.</p><p><strong>Step 6: Expose the application to the internet</strong></p><p>After you&rsquo;ve deployed the application, you need to expose it to the internet using a Kubernetes service. Here&rsquo;s an
example service file:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>v1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Service</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>testsigma-service</span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>selector</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>app</span>: <span style=color:#ae81ff>testsigma</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>ports</span>:
</span></span><span style=display:flex><span>    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>http</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>port</span>: <span style=color:#ae81ff>80</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>targetPort</span>: <span style=color:#ae81ff>8000</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>type</span>: <span style=color:#ae81ff>LoadBalancer</span>
</span></span></code></pre></div><p>This service file specifies a service named &ldquo;testsigma-service&rdquo; that exposes the TestSigma application on port 80 using
a load balancer. It also specifies the selector to match the TestSigma deployment.</p><p>To apply the service file, you can use the kubectl apply command. For example, <code>kubectl apply -f testsigma-service.yaml</code>
. This command creates a load balancer and an external IP address that you can use to access the TestSigma application
from the internet.</p><p><strong>Step 7: Verify the application</strong></p><p>After you&rsquo;ve exposed the application to the internet, you can verify it by visiting the external IP address in your web
browser. For example, http://external-ip. If everything is working correctly, you should see the TestSigma login page.</p><h3 id=conclusion>Conclusion</h3><p>Migrating TestSigma to Google Cloud can be a complex task, but with the help of Docker and Kubernetes, it can be
simplified. In this tutorial, we&rsquo;ve covered the steps of cloning the TestSigma repository, creating a Dockerfile,
building and pushing a Docker image, creating a Kubernetes cluster, deploying the Docker image to the cluster, exposing
the application to the internet, and verifying the application. With these steps, you can successfully migrate TestSigma
to Google Cloud.</p></div></article></main><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild===n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName==="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>