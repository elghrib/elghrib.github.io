<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>How to Build Cloud Infrastructure
- Mustafa Abdallah
- 2023-06-08 10:56:05 +0300 +0300
- Alexandria, Egypt</title><meta name=keywords content><meta name=description content="How to Build Cloud Infrastructure - mstva"><link rel=canonical href=https://mstva.github.io/how_to_build_cloud_infrastructure/><link crossorigin=anonymous href=/assets/css/stylesheet.91e2c6805cdbec2a2daa71ced2d81e062121159082b680e0cc467a081126da44.css integrity="sha256-keLGgFzb7CotqnHO0tgeBiEhFZCCtoDgzEZ6CBEm2kQ=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://mstva.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://mstva.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://mstva.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://mstva.github.io/apple-touch-icon.png><link rel=mask-icon href=https://mstva.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://mstva.github.io/ accesskey=h title="mstva (Alt + H)">mstva</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://mstva.github.io/tech_writings/ title=tech_writings><span>tech_writings</span></a></li><li><a href=https://mstva.github.io/arabic_writings/ title=كتاباتي_بالعربية><span>كتاباتي_بالعربية</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>How to Build Cloud Infrastructure</h1><p class=post-date>Mustafa Abdallah - 8 June 2023 - Alexandria, Egypt</p><hr></header><div class=post-content><h1 id=introduction>Introduction</h1><p>With the age of cloud computing and public cloud like AWS, GCP, and Azure, building a cloud infrastructure become a regular thing that we do in software development, but doing it right with defined steps and framework is what will make you produce high-quality and efficient work. Today I am writing about those steps that make us build an efficient cloud infrastructure.</p><h2 id=table-of-contents>Table of Contents:</h2><ul><li><a href=#steps-of-building-a-cloud-infrastructure>Steps of Building a Cloud Infrastructure</a><ul><li><a href=#define>Define</a></li><li><a href=#choose>Choose</a></li><li><a href=#plan>Plan</a></li><li><a href=#design>Design</a></li><li><a href=#implement>Implement</a></li><li><a href=#deploy>Deploy</a></li><li><a href=#monitor>Monitor</a></li><li><a href=#maintain>Maintain</a></li></ul></li><li><a href=#what-is-next-in-this-series>What is Next in This Series?</a></li><li><a href=#conclusion>Conclusion</a></li></ul><hr><h1 id=steps-of-building-a-cloud-infrastructure>Steps of Building a Cloud Infrastructure</h1><p>These steps define what we should follow when building cloud infrastructure, and it&rsquo;s applicable on any cloud provider, here is a detailed overview about each one:</p><h2 id=define>Define</h2><p>You first need to define your requirements and goals, so you could have an outline about what you want to achieve, you should study your application and decide how you want to deploy it, there are a lot of deployments methods and I wrote about some of them before <a href>in this article</a>. after choosing the deployment method you will need to know the services that you will need in the cloud.</p><p>For example, if you have a Python Backend API built with Django and you chose to deploy it using Docker on a remote server, you will need to consider services like that:</p><ul><li>For remote server, you will need a virtual machine on the cloud and that could be done using something like AWS EC2, Google Compute Engine or Azure Virtual Machine</li><li>For Docker, you will need a docker registry that you will push and pull your docker image form it, and that could be done using services like Docker Hub, AWS ECR, or Azure ACR</li><li>For the Django you will need a database and storage services, and that could be done using services like AWS RDS, Google SQL, or Azure Database for database, and for storage you could use services like AWS S3, Google Storage, or Azure Blob Storage</li></ul><p>So up till now you defined your deployment method and the services you may need from the cloud, next step is to choose the cloud provider.</p><h2 id=choose>Choose</h2><p>After you define your requirements and goals, you have to choose one of the public cloud providers that satisfy your requirements and your budget, even each one may follow the pay per use payment strategy, the prices of services may be expansive in one and cheaper in others, you could actually benefit from them all together in something called multi or hybrid cloud, the most important thing is to choose a cloud provider, so you could provision the services you want for your application on it.</p><p>The three public and popular cloud providers right now are AWS, GCP, and Azure, all of them provide services that are the same in the concept and different in the configration, for example if you want a remote server you could find it on AWS under AWS EC2 service, on GCP under Google Compute Engine, and on Azure under Azure Virtual Machine, all of them will give you the same remote server.</p><p>For example, for our previous Python Backend API that we talked about it in the define step above, based on the requirements we could choose AWS as it provide services for all what we want and the pay per use payment model could be good for us, so we could pay only for our use.</p><p>All of the above cloud providers provide free tier that you could benefit from it if you are not sure what to choose, check those cloud providers websites to know more.</p><h2 id=plan>Plan</h2><p>So after we defined the services that we want, and chose the cloud provider, we need to plan our cloud infrastructure, so we just need to choose the cloud services that match our needs from the cloud provider that we chose and select the configuration for them.</p><p>For example, for backend api, we need a remote server, docker registry, database and storage. we have chose AWS as our cloud provider so let&rsquo;s see what AWS services that match our requirements</p><ul><li>Remote Server: AWS provide AWS EC2 service that help us configure ubuntu server to host our code, and the configuration we could choose Ubuntu for the OS, t2.micro for the CPU, and 20G general purpose SSD for the server volume storage size and type.</li><li>Doker Registry: AWS provide AWS ECR service that let us push and pull docker images, and the configuration we could choose public or private repository.</li><li>Database: AWS provide AWS RDS service that let us provision PostgresSQl managed database, and the configuration we could choose Postgres for the database engine, db.t3.micro for the database CPU and 20G for storage of the managed database.</li><li>Storage: AWS provide AWS S3 service that let us store our static and media files, and the configuration we could choose how much storage and what type of access to it, between public or private.</li></ul><h2 id=design>Design</h2><p>After planning, we need something visually so we could have an overview of the big picture of our cloud infrastructure, and it&rsquo;s the best way to make changes before implementation, what we actually need is to design our solution based on the cloud provider we chose, this will show how those services connected together and how the workflow of our cloud infrastructure will work, this step actually need more work and taking in consideration networking and security, and there a frameworks for helping in doing it effectively like <a href=https://aws.amazon.com/architecture/well-architected>AWS Well-Architected</a> that are beyond the scope of this article.</p><p>For example, for our backend API, we may design and draw a diagram for our cloud infrastructure using a tool like <a href="https://app.diagrams.net/?splash=0&amp;libs=aws4">draw.io</a>, as you see in the picture below, our infrastructure is very simple, the user go to the IP address of the AWS EC2 instance, the instance is actually running a docker container from our image that are pulled from AWS ECR, and our docker image that pushed and saved in the AWS ECR will access the AWS S3 and AWS RDS for our code to use them.</p><figure><img src=/images/cloud_infrastructure_diagram.png width=100%></figure><h2 id=implement>Implement</h2><p>All the previous steps is just the basic blocks that we need to do before touching anything, that will help us do the things correctly, after that we need to implement our solution and provisioning this services on the cloud provider, for AWS we could use the console dashboard, the AWS CLI, or Infrastructure as code tool like AWS CloudFormation or Terraform.</p><p>Based on the planning step we will have the services and what configurations for them, and we could go and do them, and based on the design we could know the relationship between services and how the workflow will behave on the cloud, you may consider something like VPC and security groups for the EC2 instance, but for now let&rsquo;s keep things simple.</p><h2 id=deploy>Deploy</h2><p>So everything is setup correctly? right let&rsquo;s use them to deploy our code, so for our backend api, our code is containerized in docker image, we will push the image to ECR and update our code to use the AWS RDS and AWS S3 for the database and storage, and by ssh to our server we could pull the docker image and make a container from it so our backend api could run on the server, and we visit it through the IP address of the EC2 instance.</p><p>For deployment, we could actually do that manually, or use a CI/CD tool like GitHub Actions or Jenkins to do them automatically, both ways works, and we could do them together, first do manual deployment to ensure that everything is working correctly, and then write a CI/CD pipeline to do the steps you did automatically.</p><h2 id=monitor>Monitor</h2><p>We may need to setup monitoring tools, so you could have an overview about your code and cloud infrastructure performance in case you want to improve them and has some data to make decisions.</p><h2 id=maintain>Maintain</h2><p>You will need this as this cloud provider frequently update and remove stuff from their services, so you will need to keep your cloud infrastructure working by maintaining it regularly.</p><h1 id=what-is-next-in-this-series>What is Next in This Series?</h1><p>I will continue and write other articles about how to build cloud infrastructure on AWS, Azure, GCP and Digital Ocean. I will use real world examples and projects and I will follow the steps above and write more detailed approach, so you could know how to build your own.</p><h1 id=conclusion>Conclusion</h1><p>Cloud computing has changed the game of software development, and companies goes toward adapting them in their organization, so knowing how to use them effectively will help you create efficient solutions, so going to the cloud provider directly is not enough, you should have a detailed plan and defined steps to follow to build cloud infrastructure solutions for your applications. I hope this article has been helpful for you, and feel free to follow me for more articles like this or ask me anything related on my <a href=https://linkedin.com/in/mustafaabdulluh>LinkedIn</a>.</p></div></article></main><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild===n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName==="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>